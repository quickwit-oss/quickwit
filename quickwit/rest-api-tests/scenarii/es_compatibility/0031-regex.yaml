# Basic regex match
params:
  size: 0
json:
  track_total_hits: true
  query:
    regexp:
      type:
        value: ".*event"
expected:
  hits:
    total:
      value: 100
      relation: "eq"
---
# Regex always match from start to end (`(re)` equivalent to `^(re)$`)
params:
  size: 3
json:
  track_total_hits: true
  query:
    regexp:
      type:
        value: "event"
expected:
  hits:
    total:
      value: 0
      relation: "eq"
---
# Regex with case_insensitive flag
params:
  size: 3
json:
  track_total_hits: true
  query:
    regexp:
      repo.name:
        # lowercased by the tokenizer
        value: "RUST.*"
        case_insensitive: true
expected:
  hits:
    total:
      value: 1
      relation: "eq"
---
params:
  size: 3
json:
  track_total_hits: true
  query:
    regexp:
      type:
        # lowercased by the tokenizer
        value: "RUST.*"
        case_insensitive: false
expected:
  hits:
    total:
      value: 0
      relation: "eq"
---
# In Elasticsearch, ^ and $ are escaped when they are used as anchors, so
# ^pushevent$ only matches if the original term is "^pushevent$". In Quickwit
# this fails (for now) because tantivy-fst returns an error on all zero width
# assertions.
engines:
  - elasticsearch
endpoint: "simple_es_compat/_search"
params:
  size: 3
json:
  track_total_hits: true
  query:
    regexp:
      keyword_text:
        value: "red$"
expected:
  hits:
    total:
      value: 0
      relation: "eq"
---
engines:
  - elasticsearch
endpoint: "simple_es_compat/_search"
params:
  size: 3
json:
  track_total_hits: true
  query:
    regexp:
      keyword_text:
        value: "gold$"
expected:
  hits:
    total:
      value: 1
      relation: "eq"
---
# regex in query_string
params:
  size: 10
json:
  query:
    query_string:
      query: "type:/pushevent/"
expected:
  hits:
    total:
      value: 60
      relation: "eq"
